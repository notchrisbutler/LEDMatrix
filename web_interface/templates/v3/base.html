<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    {% include 'v3/partials/_head.html' %}
</head>
<body x-data="app()" class="bg-gray-50 min-h-screen">
    <!-- Header -->
    {% include 'v3/partials/_header.html' %}

    <!-- Desktop sidebar -->
    <aside class="sidebar d-none d-lg-block">
        {% include 'v3/partials/_sidebar_nav.html' %}
    </aside>

    <!-- Mobile offcanvas sidebar -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas"
         style="width: 260px; background-color: var(--lm-surface-card);">
        <div class="offcanvas-header border-bottom" style="border-color: var(--lm-border) !important;">
            <h5 class="offcanvas-title" style="font-family: 'DM Sans', sans-serif;">
                <i class="fas fa-tv me-2" style="color: var(--lm-primary);"></i>Navigation
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body p-0">
            {% include 'v3/partials/_sidebar_nav.html' %}
        </div>
    </div>

    <!-- Main content -->
    <main class="main-content" style="padding-top: 56px;">
        <div class="container-fluid p-3 p-lg-4">

        <!-- Tab content -->
        <div id="tab-content" class="space-y-6">
            <!-- Overview tab -->
            <div x-show="activeTab === 'overview'" x-transition>
                <div id="overview-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- General tab -->
            <div x-show="activeTab === 'general'" x-transition>
                <div id="general-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WiFi tab -->
            <div x-show="activeTab === 'wifi'" x-transition>
                <div id="wifi-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule tab -->
            <div x-show="activeTab === 'schedule'" x-transition>
                <div id="schedule-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display tab -->
            <div x-show="activeTab === 'display'" x-transition>
                <div id="display-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Config Editor tab -->
            <div x-show="activeTab === 'config-editor'" x-transition>
                <div id="config-editor-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Plugins tab -->
            <div x-show="activeTab === 'plugins'" x-transition>
                <div id="plugins-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fonts tab -->
            <div x-show="activeTab === 'fonts'" x-transition>
                <div id="fonts-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs tab -->
            <div x-show="activeTab === 'logs'" x-transition>
                <div id="logs-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cache tab -->
            <div x-show="activeTab === 'cache'" x-transition>
                <div id="cache-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Operation History tab -->
            <div x-show="activeTab === 'operation-history'" x-transition>
                <div id="operation-history-content">
                    <div class="placeholder-glow">
                        <div class="card mb-3">
                            <div class="card-body">
                                <span class="placeholder col-4 mb-3"></span>
                                <span class="placeholder col-7"></span>
                                <span class="placeholder col-12" style="height: 120px;"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dynamic Plugin Tabs - Lazy Loading -->
            <template x-for="plugin in installedPlugins" :key="plugin.id">
                <div x-show="activeTab === plugin.id" x-transition>
                    <!-- Only load content when tab is active (lazy loading) -->
                    <template x-if="activeTab === plugin.id">
                        <div :id="plugin.id + '-content'"
                             class="plugin-config-tab"
                             x-init="$nextTick(() => {
                                 const root = $el.closest('[x-data]');
                                 const app = root && Alpine.$data(root);
                                 if (app && app.loadTabContent) app.loadTabContent(plugin.id);
                             })">
                            <!-- Loading skeleton shown until content loads -->
                            <div class="placeholder-glow">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <span class="placeholder col-4 mb-3"></span>
                                        <span class="placeholder col-7"></span>
                                        <span class="placeholder col-12" style="height: 120px;"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
        </div>
        </div>
    </main>

    {% include 'v3/partials/_scripts.html' %}
</body>
</html>

